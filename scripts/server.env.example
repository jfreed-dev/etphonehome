# Reach MCP Server Configuration
# Copy to /etc/reach/server.env and customize

# API key for authentication (generate with: openssl rand -hex 32)
# Uncomment and set to enable authentication
# REACH_API_KEY=your-secret-api-key-here

# Server bind address
# Use 127.0.0.1 for localhost only (recommended, use reverse proxy for external)
# Use 0.0.0.0 to listen on all interfaces (not recommended without auth)
# REACH_HOST=127.0.0.1

# Server port
# REACH_PORT=8765

# Log level (DEBUG, INFO, WARNING, ERROR)
# REACH_LOG_LEVEL=INFO

# Log file path (default: /var/log/reach/server.log or ~/.reach/logs/server.log)
# REACH_LOG_FILE=/var/log/reach/server.log

# Maximum log file size in bytes before rotation (default: 10MB)
# REACH_LOG_MAX_BYTES=10485760

# Number of backup log files to keep (default: 5)
# REACH_LOG_BACKUP_COUNT=5

# ============================================================================
# Webhooks
# ============================================================================

# Global webhook URL for all events (leave empty to disable)
# Events: client.connected, client.disconnected, client.key_mismatch,
#         client.unhealthy, command_executed, file_accessed
# REACH_WEBHOOK_URL=https://your-webhook-endpoint.com/hook

# Webhook HTTP timeout in seconds (default: 10)
# REACH_WEBHOOK_TIMEOUT=10.0

# Maximum retry attempts for failed webhooks (default: 3)
# REACH_WEBHOOK_MAX_RETRIES=3

# ============================================================================
# Rate Limiting (warn-only mode - logs warnings but doesn't block requests)
# ============================================================================

# Default requests per minute limit per client (default: 60)
# REACH_RATE_LIMIT_RPM=60

# Default max concurrent requests per client (default: 10)
# REACH_RATE_LIMIT_CONCURRENT=10

# ============================================================================
# Cloudflare R2 Storage (for file transfers)
# ============================================================================

# Cloudflare account ID (found in R2 dashboard)
# REACH_R2_ACCOUNT_ID=your-account-id

# R2 API access key ID
# REACH_R2_ACCESS_KEY=your-access-key-id

# R2 API secret access key
# REACH_R2_SECRET_KEY=your-secret-access-key

# R2 bucket name for file transfers (create bucket in R2 dashboard)
# REACH_R2_BUCKET=reach-transfers

# R2 region (default: auto)
# REACH_R2_REGION=auto

# ============================================================================
# Secret Synchronization (for local development)
# ============================================================================

# Enable automatic secret sync from cache/env files (default: false)
# When enabled, server will load secrets from local sources on startup
# and periodically refresh them
# REACH_SECRET_SYNC_ENABLED=true

# Interval in seconds between secret syncs (default: 3600 = 1 hour)
# REACH_SECRET_SYNC_INTERVAL=3600

# GitHub repository for secret storage (owner/repo format)
# Required if using GitHub Secrets integration for rotation
# REACH_GITHUB_REPO=your-org/reach

# Cloudflare API token (for R2 key rotation)
# Only needed if using automated key rotation
# REACH_CLOUDFLARE_API_TOKEN=your-cloudflare-api-token
