# Reach Client Configuration
# Managed by Ansible

# Server connection
server_host: {{ reach_server_host }}
server_port: {{ reach_server_port }}
server_user: {{ reach_server_user }}
key_file: {{ _reach_home }}/.reach/id_ed25519

# Client identity
{% if reach_display_name is defined and reach_display_name %}
display_name: {{ reach_display_name }}
{% endif %}
{% if reach_purpose is defined and reach_purpose %}
purpose: {{ reach_purpose }}
{% endif %}
{% if reach_tags is defined and reach_tags %}
tags:
{% for tag in reach_tags %}
  - {{ tag }}
{% endfor %}
{% endif %}

# Connection settings
reconnect_delay: {{ reach_reconnect_delay }}
max_reconnect_delay: {{ reach_max_reconnect_delay }}

{% if reach_allowed_paths is defined and reach_allowed_paths %}
# Path restrictions
allowed_paths:
{% for path in reach_allowed_paths %}
  - {{ path }}
{% endfor %}
{% endif %}

# Logging
log_level: {{ reach_log_level }}
log_file: {{ _reach_home }}/.reach/logs/client.log
log_max_bytes: {{ reach_log_max_bytes }}
log_backup_count: {{ reach_log_backup_count }}
